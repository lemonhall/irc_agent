# æ–°é—»æ’­æŠ¥å®Œæ•´å·¥ä½œæµ

## ç¯å¢ƒå‡†å¤‡

åœ¨ `E:\development\irc_agent\news_viewer` ç›®å½•ä¸‹

æ‰€æœ‰å‘½ä»¤éƒ½éœ€è¦ venv ç¯å¢ƒæ”¯æŒï¼š

```powershell
# åœ¨é¡¹ç›®æ ¹ç›®å½•æ¿€æ´»ç¯å¢ƒ
E:\development\irc_agent\
.\.venv\Scripts\activate

# è¿›å…¥å·¥ä½œç›®å½•
cd news_viewer
```

---

## ğŸ”„ äº”æ­¥å·¥ä½œæµ

### 1ï¸âƒ£ æŠ“å–æ–°é—» (fetch_news.py)
```powershell
python fetch_news.py
```
- **è¾“å…¥**: æ— 
- **è¾“å‡º**: `news.json`
- **åŠŸèƒ½**: ä»æ–°é—»æºæŠ“å–æœ€æ–°æ–°é—»æ•°æ®

---

### 2ï¸âƒ£ ç”Ÿæˆæ’­æŠ¥è„šæœ¬ (generate_broadcast.py)
```powershell
python generate_broadcast.py
```
- **è¾“å…¥**: `news.json`
- **è¾“å‡º**: `broadcasts/20251014_073211/broadcast.json`
- **åŠŸèƒ½**: 
  - åœ¨ `broadcasts/` ä¸‹åˆ›å»ºæ—¶é—´æˆ³å‘½åçš„å­ç›®å½•
  - ç”Ÿæˆç»“æ„åŒ–çš„æ’­æŠ¥è„šæœ¬ï¼ˆJSONæ ¼å¼ï¼‰
  - åŒ…å«å¼€åœºç™½ã€æ–°é—»æ¡ç›®ã€ç»“æŸè¯­ç­‰

---

### 3ï¸âƒ£ æ–‡æœ¬è½¬è¯­éŸ³ (generate_audio.py)
```powershell
python generate_audio.py
```
- **è¾“å…¥**: `broadcast.json`
- **è¾“å‡º**: 
  - å„æ¿å— MP3 æ–‡ä»¶ï¼ˆå¦‚ `section_1.mp3`ã€`section_2.mp3`ï¼‰
  - **å®Œæ•´éŸ³é¢‘**: `audio_full.mp3`ï¼ˆçº¯äººå£°ç‰ˆæœ¬ï¼‰
- **åŠŸèƒ½**: ä½¿ç”¨ç«å±±å¼•æ“ TTS API å°†æ–‡æœ¬è½¬ä¸ºè¯­éŸ³

---

### 4ï¸âƒ£ æ·»åŠ èƒŒæ™¯éŸ³ä¹ (add_bgm.py)
```powershell
python add_bgm.py --volume 0.15
```
- **è¾“å…¥**: 
  - `audio_full.mp3`ï¼ˆäººå£°ï¼‰
  - `bgm/*.mp3`ï¼ˆèƒŒæ™¯éŸ³ä¹ï¼‰
- **è¾“å‡º**: `audio_full_with_bgm.mp3`
- **åŠŸèƒ½**: å°†äººå£°ä¸ BGM æ··éŸ³ï¼ŒBGM éŸ³é‡å¯è°ƒèŠ‚

---

### 5ï¸âƒ£ ç”Ÿæˆè§†é¢‘ (generate_video.py) â­ æ–°åŠŸèƒ½
```powershell
python generate_video.py
```
- **è¾“å…¥**: 
  - `audio_full_with_bgm.mp3`ï¼ˆæˆ– `audio_full.mp3`ï¼‰
  - `news_background.jpg`ï¼ˆèƒŒæ™¯å›¾ç‰‡ï¼Œå¯é€‰ï¼‰
- **è¾“å‡º**: 
  - `video_full_with_bgm.mp4`ï¼ˆæ³¢å½¢å›¾ + ç§‘æŠ€é£é…è‰²ï¼‰
  - `video_full_with_bgm_1.mp4`ï¼ˆé¢‘è°±å›¾ + æ¸å˜é…è‰²ï¼‰
- **åŠŸèƒ½**: 
  - é™æ€å›¾ç‰‡ + éŸ³é¢‘åˆæˆè§†é¢‘
  - æ·»åŠ éŸ³é¢‘å¯è§†åŒ–æ•ˆæœï¼ˆFFT é¢‘è°±/æ³¢å½¢ï¼‰
  - æ”¯æŒå¤šç§é¢œè‰²æ–¹æ¡ˆå’Œä½ç½®

**è§†è§‰æ•ˆæœ**:
- `wave`: æ³¢å½¢å›¾ï¼ˆé€‚åˆæ–°é—»/æ’­å®¢ï¼‰
- `spectrum`: é¢‘è°±æŸ±çŠ¶å›¾ï¼ˆé€‚åˆéŸ³ä¹ï¼‰
- `vectorscope`: çŸ¢é‡ç¤ºæ³¢å™¨ï¼ˆç‚«é…·æ•ˆæœï¼‰
- `none`: çº¯é™æ€å›¾ç‰‡

---

## ğŸš€ ä¸€é”®è¿è¡Œï¼ˆæ¨èï¼‰

### Windows PowerShell
```powershell
# å®Œæ•´æµç¨‹ï¼ˆåŒ…å«è§†é¢‘ç”Ÿæˆï¼‰
.\run_workflow.ps1

# è·³è¿‡æŠ“æ–°é—»ï¼ˆä½¿ç”¨ç°æœ‰ news.jsonï¼‰
.\run_workflow.ps1 -SkipFetch

# åªç”Ÿæˆè§†é¢‘ï¼ˆè·³è¿‡å‰ 4 æ­¥ï¼‰
.\run_workflow.ps1 -SkipFetch -SkipBroadcast -SkipAudio -SkipBGM

# è°ƒæ•´ BGM éŸ³é‡
.\run_workflow.ps1 -BGMVolume 0.2
```

### Linux/Mac
```bash
./run_workflow.sh
```

---

## ğŸ“‚ è¾“å‡ºç›®å½•ç»“æ„

```
broadcasts/
â””â”€â”€ 20251014_073211/          # æ—¶é—´æˆ³å‘½å
    â”œâ”€â”€ broadcast.json        # æ’­æŠ¥è„šæœ¬ï¼ˆç»“æ„åŒ–ï¼‰
    â”œâ”€â”€ broadcast.txt         # æ’­æŠ¥è„šæœ¬ï¼ˆçº¯æ–‡æœ¬ï¼‰
    â”œâ”€â”€ section_1.mp3         # æ¿å—1éŸ³é¢‘
    â”œâ”€â”€ section_2.mp3         # æ¿å—2éŸ³é¢‘
    â”œâ”€â”€ audio_full.mp3        # å®Œæ•´éŸ³é¢‘ï¼ˆçº¯äººå£°ï¼‰
    â”œâ”€â”€ audio_full_with_bgm.mp3  # å¸¦BGMéŸ³é¢‘
    â”œâ”€â”€ video_full_with_bgm.mp4     # è§†é¢‘1ï¼ˆæ³¢å½¢+ç§‘æŠ€é£ï¼‰
    â””â”€â”€ video_full_with_bgm_1.mp4   # è§†é¢‘2ï¼ˆé¢‘è°±+æ¸å˜ï¼‰
```

---

## ğŸ¨ èƒŒæ™¯å›¾ç‰‡ç®¡ç†

### ä¸‹è½½èƒŒæ™¯å›¾ç‰‡
```powershell
python download_background.py
```

æ”¯æŒä¸»é¢˜ï¼š
1. æ–°é—»æ¼”æ’­å®¤
2. ç°ä»£åŠå…¬å®¤
3. ç§‘æŠ€æŠ½è±¡
4. çº¯è‰²æ¸å˜ï¼ˆæœ¬åœ°ç”Ÿæˆï¼Œæ— éœ€ç½‘ç»œï¼‰

### ä½¿ç”¨è‡ªå®šä¹‰å›¾ç‰‡
- å›¾ç‰‡å‘½å: `news_background.jpg`
- æ”¾ç½®ä½ç½®: `news_viewer/` ç›®å½•
- æ¨èå°ºå¯¸: **1280x720** (16:9)

---

## ğŸ”§ é«˜çº§é…ç½®

### è§†é¢‘ç”Ÿæˆå‚æ•°ï¼ˆPython APIï¼‰
```python
from generate_video import NewsVideoGenerator

generator = NewsVideoGenerator()

generator.generate_video(
    audio_path=Path("audio.mp3"),
    output_path=Path("output.mp4"),
    image_path=Path("background.jpg"),  # å¯é€‰
    effect="wave",                       # wave/spectrum/vectorscope/none
    wave_position="bottom",              # top/bottom/center
    color_scheme="tech",                 # default/gradient/blue/gold/tech
    wave_height=200,                     # æ³¢å½¢é«˜åº¦ï¼ˆåƒç´ ï¼‰
    video_quality=23                     # 18=é«˜è´¨é‡ï¼Œ28=ä½è´¨é‡
)
```

### BGM éŸ³é‡è°ƒæ•´
```powershell
python add_bgm.py --volume 0.1   # å®‰é™ï¼ˆ10%ï¼‰
python add_bgm.py --volume 0.15  # é»˜è®¤ï¼ˆ15%ï¼‰
python add_bgm.py --volume 0.25  # å“äº®ï¼ˆ25%ï¼‰
```

---

## ğŸ› å¸¸è§é—®é¢˜

### âŒ "ffmpeg ä¸å¯ç”¨"
**è§£å†³**: å®‰è£… ffmpeg å¹¶æ·»åŠ åˆ° PATH
```powershell
# æ£€æŸ¥å®‰è£…
ffmpeg -version

# ä¸‹è½½: https://ffmpeg.org/download.html
```

### âŒ "èƒŒæ™¯å›¾ç‰‡ä¸å­˜åœ¨"
**è§£å†³**: è¿è¡ŒèƒŒæ™¯å›¾ç‰‡ä¸‹è½½å™¨
```powershell
python download_background.py
```
æˆ–ç³»ç»Ÿä¼šè‡ªåŠ¨ä½¿ç”¨çº¯è‰²èƒŒæ™¯ã€‚

### âŒ éŸ³é¢‘ç”Ÿæˆå¤±è´¥
**åŸå› **: ç«å±±å¼•æ“ API å¯†é’¥æœªé…ç½®
**è§£å†³**: åœ¨ `.env` ä¸­è®¾ç½®:
```
VOLCENGINE_APP_ID=your_app_id
VOLCENGINE_ACCESS_TOKEN=your_token
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- **å®Œæ•´å·¥ä½œæµ**: `AUTOMATION_GUIDE.md`
- **ä½¿ç”¨æŒ‡å—**: `USAGE_GUIDE.md`
- **è§†é¢‘ç”Ÿæˆè¯¦è§£**: `VIDEO_GENERATION_GUIDE.md`
- **BGM æ¨è**: `bgm/BGM_RECOMMENDATIONS.md`

---

## ğŸ”® æœªæ¥æ‰©å±•

- [ ] æ—¶é—´è½´å›¾ç‰‡åˆ‡æ¢ï¼ˆå‚è€ƒ `timeline_example.py`ï¼‰
- [ ] å­—å¹•å åŠ 
- [ ] Logo æ°´å°
- [ ] å¤šè¯­è¨€æ”¯æŒ

---

**æ ¸å¿ƒå·¥ä½œæµå®Œæˆï¼** ğŸ‰

äº”æ­¥æµç¨‹ï¼š**æŠ“æ–°é—» â†’ ç”Ÿæˆè„šæœ¬ â†’ è½¬è¯­éŸ³ â†’ æ··BGM â†’ ç”Ÿæˆè§†é¢‘**